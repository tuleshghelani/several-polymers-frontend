<div class="user-container">
  <div class="search-section card">
    <h2>Search Users</h2>
    <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
      <div class="search-controls">
        <div class="form-group">
          <input 
            type="text" 
            formControlName="searchTerm" 
            class="form-control" 
            placeholder="Search users by name, email, or phone..."
          >
        </div>
        <div class="form-group">
          <select formControlName="status" class="form-control">
            <option value="">All Status</option>
            <option value="A">Active</option>
            <option value="I">Inactive</option>
          </select>
        </div>
        <div class="button-group">
          <button type="submit" class="search-btn btn btn-sm btn-primary">
            <i class="fas fa-search"></i> Search
          </button>
          <button type="button" class="search-btn btn btn-sm btn-secondary" (click)="resetForm()">
            <i class="fas fa-undo"></i> Reset
          </button>
        </div>
      </div>
    </form>
  </div>

  <div class="action-buttons">
    <button routerLink="/user/create" class="btn btn-sm btn-primary">
      <i class="fas fa-plus"></i> Add User
    </button>
  </div>

  <div class="users-list card">
    <h2>Users</h2>
    <div class="table-wrapper">
      <div class="table-container">
        <app-loader [show]="isLoading"></app-loader>
        
        <div class="table-responsive" [class.loading]="isLoading">
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Roles</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let user of users" class="user-row">
                <td class="user-name">{{user.firstName}} {{user.lastName}}</td>
                <td>{{user.phoneNumber}}</td>
                <td>{{user.email}}</td>
                <td>
                  <div class="roles-container">
                    <span class="roles-badge" *ngFor="let role of user.roles">
                      {{role}}
                    </span>
                  </div>
                </td>
                <td>
                  <span class="status-badge" [ngClass]="{'active': user.status === 'A', 'inactive': user.status !== 'A'}">
                    {{user.status === 'A' ? 'Active' : 'Inactive'}}
                  </span>
                </td>
                <td class="actions">
                  <button 
                    class="btn-icon edit" 
                    [routerLink]="['/user/edit', user.id]"
                    title="Edit User"
                  >
                    <i class="fas fa-edit"></i>
                  </button>
                  <button 
                    class="btn-icon delete" 
                    (click)="deleteUser(user.id!)"
                    title="Delete User"
                  >
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              </tr>
              <tr *ngIf="!users?.length">
                <td colspan="6" class="text-center">No users found</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <app-pagination
      *ngIf="totalPages > 0"
      [currentPage]="currentPage"
      [pageSize]="pageSize"
      [totalElements]="totalElements"
      [pageSizeOptions]="pageSizeOptions"
      (pageChange)="onPageChange($event)"
      (pageSizeChange)="onPageSizeChange($event)"
    ></app-pagination>
  </div>
</div>
