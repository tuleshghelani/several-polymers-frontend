<div class="transport-list-container">
  <div class="search-section card">
    <h2><i class="fas fa-truck"></i> Transport List</h2>
    <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
      <div class="search-controls">
        <div class="form-group">
          <input 
            type="text" 
            formControlName="search" 
            class="form-control" 
            placeholder="Search by customer name..."
          >
        </div>
        <div class="form-group">
          <input 
            type="date" 
            formControlName="startDate" 
            class="form-control" 
            placeholder="Start Date"
          >
        </div>
        <div class="form-group">
          <input 
            type="date" 
            formControlName="endDate" 
            class="form-control" 
            placeholder="End Date"
          >
        </div>
        <div class="button-group">
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-search"></i> Search
          </button>
          <button type="button" class="btn btn-secondary" (click)="resetForm()">
            <i class="fas fa-undo"></i> Reset
          </button>
        </div>
      </div>
    </form>
  </div>
    
  <div class="action-buttons">
      <button routerLink="/transport/create" class="btn btn-primary">
        <i class="fas fa-plus"></i> Create Transport
      </button>
  </div>

  <div class="transports-list card">
    <h2>Transports</h2>
    <div class="table-container">
      <app-loader [show]="isLoading"></app-loader>
      
      <div class="table-responsive" [class.loading]="isLoading">
        <table class="table">
          <thead>
            <tr>
              <th>No.</th>
              <th>Customer Name</th>
              <th>Total Weight</th>
              <th>Total Bags</th>
              <th>Created At</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transport of transports; let i = index">
              <td>{{ startIndex + i + 1 }}</td>
              <td>{{ transport.customerName }}</td>
              <td>{{ transport.totalWeight | number:'1.3-3' }} kg</td>
              <td>{{ transport.totalBags }}</td>
              <td>{{ transport.createdAt | date:'medium' }}</td>
              <td class="actions">
                <button class="btn-icon" [routerLink]="['/transport/edit', transport.id]" title="Edit Transport">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon print" (click)="onPrintTransport(transport.id)" title="Print Transport">
                  <i class="fas fa-print"></i>
                </button>
                <button class="btn-icon delete" (click)="onDeleteTransport(transport.id)" title="Delete Transport">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
            <tr *ngIf="!isLoading && (!transports || transports.length === 0)">
              <td colspan="4" class="no-data">No transports found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="table-controls">
      <app-pagination
        *ngIf="totalPages > 0"
        [currentPage]="currentPage"
        [pageSize]="pageSize"
        [totalElements]="totalElements"
        [pageSizeOptions]="pageSizeOptions"
        (pageChange)="onPageChange($event)"
        (pageSizeChange)="onPageSizeChange($event)"
      ></app-pagination>
    </div>
  </div>
</div>

<app-confirm-modal
  [show]="showDeleteModal"
  title="Delete Transport"
  message="Are you sure you want to delete this transport? This action cannot be undone."
  (confirm)="confirmDelete()"
  (cancel)="cancelDelete()"
></app-confirm-modal>
